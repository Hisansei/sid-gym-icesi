<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      th:replace="~{components/base :: page(
          title='Detalle de usuario',
          content=~{::content}
      )}">
<section th:fragment="content" class="admin-users-page">
  <link rel="stylesheet" th:href="@{/css/app.css}">
  <link rel="stylesheet" th:href="@{/css/admin-users.css}">

  <header class="site-header">
    <div class="container page-header">
      <div>
        <h1 class="page-title">Detalle del usuario</h1>
        <p class="page-subtitle">Información asociada a esta cuenta institucional.</p>
      </div>
    </div>
  </header>

  <main class="container">
    <div th:if="${error}" class="card alert-error">
      <span th:text="${error}">Usuario no encontrado.</span>
      <div class="card-actions">
        <a th:href="@{/mvc/admin/users}">Volver</a>
      </div>
    </div>

    <section th:if="${actualUser != null}" class="card">
      <h2 class="card-title">Información general</h2>

      <table class="detail-table">
        <tr>
          <th>Username</th>
          <td th:text="${actualUser.username}">username</td>
        </tr>
        <tr>
          <th>Rol</th>
          <td th:text="${actualUser.role}">ROLE</td>
        </tr>
        <tr>
          <th>Estudiante ID</th>
          <td th:text="${actualUser.studentId}">-</td>
        </tr>
        <tr>
          <th>Empleado ID</th>
          <td th:text="${actualUser.employeeId}">-</td>
        </tr>
        <tr>
          <th>Activo</th>
          <td th:text="${actualUser.active} ? 'Sí' : 'No'">Sí</td>
        </tr>
        <tr>
          <th>Creado</th>
          <td th:text="${actualUser.createdAt != null ? #temporals.format(actualUser.createdAt,'dd/MM/yyyy HH:mm') : '-'}">
            fecha
          </td>
        </tr>
      </table>

      <!-- Mantengo este bloque tal cual, solo reubicado -->
      <div th:if="${actualUser.passwordHash}" style="display:none"></div>

      <div class="card-actions">
        <a th:href="@{/mvc/reports/select(username=${actualUser.username})}">Generar Reportes</a>
        <a th:href="@{/mvc/admin/users}">Volver al listado</a>
      </div>
    </section>

    <section th:if="${actualUser == null and error == null}" class="card">
      <p>Usuario no disponible.</p>
      <div class="card-actions">
        <a th:href="@{/mvc/admin/users}">Volver</a>
      </div>
    </section>
  </main>
</section>
</html>
