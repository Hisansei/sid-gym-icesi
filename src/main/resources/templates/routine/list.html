<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{components/base :: page(
          title='Mis rutinas',
          content=~{::content}
      )}">
<section th:fragment="content">
    <link rel="stylesheet" th:href="@{/css/app.css}">
    <header class="site-header">
        <div class="container actions">
            <h1 class="page-title">Mis rutinas</h1>
            <form th:action="@{/mvc/routines/create}" method="post" class="actions" style="margin:0">
                <input type="text" name="name" placeholder="Nombre de la rutina (opcional)"/>
                <button class="btn" type="submit">Crear rutina</button>
            </form>
            <a class="btn btn-secondary" th:href="@{/mvc/routines/create}">Crear desde ejercicios</a>
        </div>
    </header>

    <main class="container card">
        <table class="table">
            <thead>
            <tr>
                <th>Nombre</th>
                <th>Ítems</th>
                <th>Origen</th>
                <th></th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${#lists.isEmpty(routines)}">
                <td class="muted" colspan="4">Aún no tienes rutinas.</td>
            </tr>
            <tr th:each="r : ${routines}">
                <td th:text="${r.name}">Nombre</td>
                <td th:text="${#lists.size(r.exercises)}">0</td>
                <td th:text="${r.sourceTemplateId != null ? r.sourceTemplateId : '—'}">origen</td>
                <td class="table-actions">
                    <a class="btn btn-small" th:href="@{'/mvc/routines/' + ${r.id}}">Abrir</a>
                    <a class="btn btn-small" th:href="@{'/mvc/progress/' + ${r.id}}">Registrar progreso</a>
                </td>
            </tr>
            </tbody>
        </table>
    </main>
</section>
</html>
