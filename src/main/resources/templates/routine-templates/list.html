<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      th:replace="~{components/base :: page(
          title='Plantillas de rutina',
          content=~{::content}
      )}">
<section th:fragment="content">
  <link rel="stylesheet" th:href="@{/css/app.css}">
  <header class="site-header">
    <div class="container actions">
      <h1 class="page-title">Plantillas de rutina</h1>
      <nav class="actions">
        <a class="btn" th:href="@{/mvc/routines}">Mis rutinas</a>
        <a class="btn" sec:authorize="hasAnyRole('TRAINER','ADMIN')" th:href="@{/mvc/routine-templates/create}">Nueva plantilla</a>
      </nav>
    </div>
  </header>

  <main class="container card">
    <table class="table">
      <thead>
      <tr><th>Nombre</th><th>√çtems</th><th>Entrenador</th><th></th></tr>
      </thead>
      <tbody>
      <tr th:if="${#lists.isEmpty(templates)}">
        <td class="muted" colspan="4">No hay plantillas.</td>
      </tr>
      <tr th:each="t : ${templates}">
        <td th:text="${t.name}">Nombre</td>
        <td th:text="${#lists.size(t.exercises)}">0</td>
        <td th:text="${t.trainerId}">trainer</td>
        <td class="table-actions">
          <a class="btn btn-small" th:href="@{'/mvc/routine-templates/' + ${t.id}}">Ver</a>
          <form th:action="@{'/mvc/routine-templates/' + ${t.id} + '/adopt'}" method="post" style="display:inline">
            <button class="btn btn-small" type="submit">Adoptar</button>
          </form>
        </td>
      </tr>
      </tbody>
    </table>
  </main>
</section>
</html>
